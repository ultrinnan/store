# Product Import System

–°–∏—Å—Ç–µ–º–∞ –¥–ª—è —ñ–º–ø–æ—Ä—Ç—É —Ç–æ–≤–∞—Ä—ñ–≤ –∑ –¥–∏–ª–µ—Ä—Å—å–∫–∏—Ö —Ç–∞ —Ä—ñ—Ç–µ–π–ª –¥–∂–µ—Ä–µ–ª —É WooCommerce –º–∞–≥–∞–∑–∏–Ω.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É

```
sync_scripts/
‚îú‚îÄ‚îÄ 01_fetch_products.sh          # Stage 1: –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö
‚îú‚îÄ‚îÄ 02_analyze_products.sh        # Stage 2: –ê–Ω–∞–ª—ñ–∑ –¥–∞–Ω–∏—Ö
‚îú‚îÄ‚îÄ 03_prepare_categories_attributes.php  # Stage 3: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–∞—Ç–µ–≥–æ—Ä—ñ–π —Ç–∞ –±—Ä–µ–Ω–¥—ñ–≤
‚îú‚îÄ‚îÄ 04_split_products.php         # Stage 4: –†–æ–∑–¥—ñ–ª–µ–Ω–Ω—è —Ç–æ–≤–∞—Ä—ñ–≤ –Ω–∞ –ø—Ä–æ—Å—Ç—ñ —Ç–∞ –∑–º—ñ–Ω–Ω—ñ
‚îú‚îÄ‚îÄ 05_import_simple_products.php # Stage 5: –Ü–º–ø–æ—Ä—Ç –ø—Ä–æ—Å—Ç–∏—Ö —Ç–æ–≤–∞—Ä—ñ–≤
‚îú‚îÄ‚îÄ 05_import_simple_products_test.php # –¢–µ—Å—Ç–æ–≤–∏–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è Stage 5
‚îú‚îÄ‚îÄ main_import.sh                # –û—Å–Ω–æ–≤–Ω–∏–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –∑–∞–ø—É—Å–∫—É –≤—Å—ñ—Ö –µ—Ç–∞–ø—ñ–≤
‚îî‚îÄ‚îÄ README.md                     # –¶–µ–π —Ñ–∞–π–ª
```

## –ï—Ç–∞–ø–∏ —ñ–º–ø–æ—Ä—Ç—É

### ‚úÖ Stage 1: –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö (`01_fetch_products.sh`)
- –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î –ø–æ–≤–Ω—ñ —Å–ø–∏—Å–∫–∏ —Ç–æ–≤–∞—Ä—ñ–≤ –∑ –¥–∏–ª–µ—Ä—Å—å–∫–æ–≥–æ —Ç–∞ —Ä—ñ—Ç–µ–π–ª —Å–∞–π—Ç—ñ–≤
- –û–±—Ä–æ–±–ª—è—î –ø–∞–≥—ñ–Ω–∞—Ü—ñ—é
- –ó–±–µ—Ä—ñ–≥–∞—î –¥–∞–Ω—ñ —è–∫ `dealers_products_{date}.json` —Ç–∞ `retail_products_{date}.json`

### ‚úÖ Stage 2: –ê–Ω–∞–ª—ñ–∑ –¥–∞–Ω–∏—Ö (`02_analyze_products.sh`)
- –ê–Ω–∞–ª—ñ–∑—É—î –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω—ñ –¥–∞–Ω—ñ
- –ü–æ–∫–∞–∑—É—î –≤—Å—ñ —Ç–µ–≥–∏, –≤–µ–Ω–¥–æ—Ä–∏, –∞—Ç—Ä–∏–±—É—Ç–∏
- –°—Ç–≤–æ—Ä—é—î –∑–≤—ñ—Ç–∏ –∞–Ω–∞–ª—ñ–∑—É

### ‚úÖ Stage 3: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–∞—Ç–µ–≥–æ—Ä—ñ–π —Ç–∞ –±—Ä–µ–Ω–¥—ñ–≤ (`03_prepare_categories_attributes.php`)
- –°—Ç–≤–æ—Ä—é—î –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó –∑ —Ç–µ–≥—ñ–≤ —Ç–æ–≤–∞—Ä—ñ–≤ (–ø–æ–≤–Ω—ñ —Ç–µ–≥–∏ –±–µ–∑ —Ä–æ–∑–¥—ñ–ª–µ–Ω–Ω—è)
- –°—Ç–≤–æ—Ä—é—î –±—Ä–µ–Ω–¥–∏ –∑ –≤–µ–Ω–¥–æ—Ä—ñ–≤
- –ó–±–µ—Ä—ñ–≥–∞—î –º–∞–ø—ñ–Ω–≥ —É `categories_created.json`, `brands_created.json`

### ‚úÖ Stage 4: –†–æ–∑–¥—ñ–ª–µ–Ω–Ω—è —Ç–æ–≤–∞—Ä—ñ–≤ (`04_split_products.php`)
- –ê–Ω–∞–ª—ñ–∑—É—î —Å–∫–ª–∞–¥–Ω—ñ—Å—Ç—å —Ç–æ–≤–∞—Ä—ñ–≤
- –†–æ–∑–¥—ñ–ª—è—î –Ω–∞ –ø—Ä–æ—Å—Ç—ñ —Ç–∞ –∑–º—ñ–Ω–Ω—ñ —Ç–æ–≤–∞—Ä–∏
- –ó–±–µ—Ä—ñ–≥–∞—î —É `simple_products_{date}.json` —Ç–∞ `variable_products_{date}.json`

### ‚úÖ Stage 5: –Ü–º–ø–æ—Ä—Ç –ø—Ä–æ—Å—Ç–∏—Ö —Ç–æ–≤–∞—Ä—ñ–≤ (`05_import_simple_products.php`)
- –Ü–º–ø–æ—Ä—Ç—É—î –ø—Ä–æ—Å—Ç—ñ —Ç–æ–≤–∞—Ä–∏ –≤ WooCommerce
- –ü—Ä–∞–≤–∏–ª—å–Ω–∞ –ª–æ–≥—ñ–∫–∞ —Ü—ñ–Ω: —Ä—ñ—Ç–µ–π–ª —Ü—ñ–Ω–∞ - 10% (–∑ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—î—é USD‚ÜíEUR)
- –í—Å—Ç–∞–Ω–æ–≤–ª—é—î SKU, –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó, –±—Ä–µ–Ω–¥–∏, –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è
- –û–Ω–æ–≤–ª—é—î —ñ—Å–Ω—É—é—á—ñ —Ç–æ–≤–∞—Ä–∏

### üîÑ Stage 6: –Ü–º–ø–æ—Ä—Ç –∑–º—ñ–Ω–Ω–∏—Ö —Ç–æ–≤–∞—Ä—ñ–≤ (–≤ —Ä–æ–∑—Ä–æ–±—Ü—ñ)
- –Ü–º–ø–æ—Ä—Ç —Ç–æ–≤–∞—Ä—ñ–≤ –∑ –≤–∞—Ä—ñ–∞—Ü—ñ—è–º–∏
- –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∞—Ç—Ä–∏–±—É—Ç—ñ–≤ —Ç–∞ –≤–∞—Ä—ñ–∞—Ü—ñ–π
- –ü–ª–∞–Ω—É—î—Ç—å—Å—è

## –õ–æ–≥—ñ–∫–∞ —Ü—ñ–Ω

–°–∏—Å—Ç–µ–º–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –Ω–∞—Å—Ç—É–ø–Ω—É –ª–æ–≥—ñ–∫—É –¥–ª—è —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É —Ü—ñ–Ω:

1. **–î–∏–ª–µ—Ä—Å—å–∫–∞ —Ü—ñ–Ω–∞** (–≤ —î–≤—Ä–æ) - –∑–∞–∫—É–ø—ñ–≤–µ–ª—å–Ω–∞ —Ü—ñ–Ω–∞
2. **–†—ñ—Ç–µ–π–ª —Ü—ñ–Ω–∞** (–≤ –¥–æ–ª–∞—Ä–∞—Ö) - —Ü—ñ–Ω–∞ –≤ —ñ–Ω—à–∏—Ö –º–∞–≥–∞–∑–∏–Ω–∞—Ö
3. **–ù–∞—à–∞ —Ü—ñ–Ω–∞** = —Ä—ñ—Ç–µ–π–ª —Ü—ñ–Ω–∞ –≤ —î–≤—Ä–æ - 10% (–∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–∞ —Ü—ñ–Ω–∞)
4. **–Ø–∫—â–æ —Ä—ñ—Ç–µ–π–ª —Ü—ñ–Ω–∏ –Ω–µ–º–∞—î** = –¥–∏–ª–µ—Ä—Å—å–∫–∞ —Ü—ñ–Ω–∞ + 30% markup

–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—è –≤–∞–ª—é—Ç: 1 USD = 0.92 EUR

## –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### –ó–∞–ø—É—Å–∫ –ø–æ–≤–Ω–æ–≥–æ —ñ–º–ø–æ—Ä—Ç—É:
```bash
cd sync_scripts
./main_import.sh
```

### –ó–∞–ø—É—Å–∫ –æ–∫—Ä–µ–º–∏—Ö –µ—Ç–∞–ø—ñ–≤:
```bash
# Stage 1: –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö
./01_fetch_products.sh

# Stage 2: –ê–Ω–∞–ª—ñ–∑
./02_analyze_products.sh

# Stage 3: –ö–∞—Ç–µ–≥–æ—Ä—ñ—ó —Ç–∞ –±—Ä–µ–Ω–¥–∏
docker compose exec wordpress php /var/www/html/sync_scripts/03_prepare_categories_attributes.php

# Stage 4: –†–æ–∑–¥—ñ–ª–µ–Ω–Ω—è —Ç–æ–≤–∞—Ä—ñ–≤
docker compose exec wordpress php /var/www/html/sync_scripts/04_split_products.php

# Stage 5: –Ü–º–ø–æ—Ä—Ç –ø—Ä–æ—Å—Ç–∏—Ö —Ç–æ–≤–∞—Ä—ñ–≤
docker compose exec wordpress php /var/www/html/sync_scripts/05_import_simple_products.php

# –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è Stage 5
docker compose exec wordpress php /var/www/html/sync_scripts/05_import_simple_products_test.php
```

## –§–∞–π–ª–∏ –¥–∞–Ω–∏—Ö

### –û—Å–Ω–æ–≤–Ω—ñ —Ñ–∞–π–ª–∏ (–≤ `tmp/`):
- `dealers_products_latest.json` - –∞–∫—Ç—É–∞–ª—å–Ω—ñ –¥–∏–ª–µ—Ä—Å—å–∫—ñ —Ç–æ–≤–∞—Ä–∏
- `retail_products_latest.json` - –∞–∫—Ç—É–∞–ª—å–Ω—ñ —Ä—ñ—Ç–µ–π–ª —Ç–æ–≤–∞—Ä–∏
- `categories_created.json` - –º–∞–ø—ñ–Ω–≥ –∫–∞—Ç–µ–≥–æ—Ä—ñ–π
- `brands_created.json` - –º–∞–ø—ñ–Ω–≥ –±—Ä–µ–Ω–¥—ñ–≤
- `simple_products_20250727_130333.json` - –ø—Ä–æ—Å—Ç—ñ —Ç–æ–≤–∞—Ä–∏ –¥–ª—è —ñ–º–ø–æ—Ä—Ç—É
- `variable_products_20250727_130333.json` - –∑–º—ñ–Ω–Ω—ñ —Ç–æ–≤–∞—Ä–∏ –¥–ª—è —ñ–º–ø–æ—Ä—Ç—É

### –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ —ñ–º–ø–æ—Ä—Ç—É:
- `simple_products_import_results_20250727_143707.json` - –¥–µ—Ç–∞–ª—å–Ω—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏
- `simple_products_import_summary_20250727_143707.json` - –ø—ñ–¥—Å—É–º–æ–∫

## –°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç—É

- ‚úÖ **Stage 1-5 –∑–∞–≤–µ—Ä—à–µ–Ω—ñ** - –ø–æ–≤–Ω–∏–π —ñ–º–ø–æ—Ä—Ç –ø—Ä–æ—Å—Ç–∏—Ö —Ç–æ–≤–∞—Ä—ñ–≤ –ø—Ä–∞—Ü—é—î
- üîÑ **Stage 6 –≤ —Ä–æ–∑—Ä–æ–±—Ü—ñ** - —ñ–º–ø–æ—Ä—Ç –∑–º—ñ–Ω–Ω–∏—Ö —Ç–æ–≤–∞—Ä—ñ–≤
- üìä **756 –ø—Ä–æ—Å—Ç–∏—Ö —Ç–æ–≤–∞—Ä—ñ–≤** —É—Å–ø—ñ—à–Ω–æ —ñ–º–ø–æ—Ä—Ç–æ–≤–∞–Ω–æ
- üí∞ **–ü—Ä–∞–≤–∏–ª—å–Ω–∞ –ª–æ–≥—ñ–∫–∞ —Ü—ñ–Ω** –∑ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—î—é –≤–∞–ª—é—Ç
- üè∑Ô∏è **–ö–∞—Ç–µ–≥–æ—Ä—ñ—ó —Ç–∞ –±—Ä–µ–Ω–¥–∏** –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤—Å—Ç–∞–Ω–æ–≤–ª—é—é—Ç—å—Å—è

## –¢–µ—Ö–Ω—ñ—á–Ω—ñ –¥–µ—Ç–∞–ª—ñ

- **WordPress + WooCommerce** –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è —Ç–æ–≤–∞—Ä—ñ–≤
- **PHP** –¥–ª—è —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó –∑ WordPress API
- **Bash** –¥–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ç–∞ –∞–Ω–∞–ª—ñ–∑—É –¥–∞–Ω–∏—Ö
- **Docker** –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ—ó —Ä–æ–∑—Ä–æ–±–∫–∏
- **JSON** –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –ø—Ä–æ–º—ñ–∂–Ω–∏—Ö –¥–∞–Ω–∏—Ö 